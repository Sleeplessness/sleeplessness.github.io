<html>
  <head>
    <title>Ambiente</title>
    <meta charset="utf8">
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <script src="../js/jquery-3.1.1.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="images.js"></script>
  </head>
  <body>
    <div class="container">
    <div id="theCarousel" class="carousel slide" data-ride="carousel">
    <!-- Indicators -->
   <!--  <ol class="carousel-indicators">
      <li data-target="#theCarousel" data-slide-to="0" class="active"></li>
      <li data-target="#theCarousel" data-slide-to="1"></li>
      <li data-target="#theCarousel" data-slide-to="2"></li>
    </ol>-->
    <!-- Wrapper for slides -->
    <div class="carousel-inner" role="listbox">

      <div class="item active">
        <img src="https://lh3.googleusercontent.com/gq0wk9U5Mi8xJJneXjT5lt8VLdcVRfwb-Zppj7C9hg0tLfRqmPay5CzWt_EyRj1sScZGUu5XdA=w1280-h1024-no" alt="">
        <div class="carousel-caption">
          <h3>Фото 1</h3>
          <p>Миллениум Парк  01_001</p>
        </div>
      </div>

    </div>

    <!-- Left and right controls -->
    <a class="left carousel-control" href="#theCarousel" role="button" data-slide="prev">
      <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#theCarousel" role="button" data-slide="next">
      <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>
  </body>
  <script>
    (function (e) {
      var imgString = [];
var middle = '';var indicators = '';
for(var i in imgString) {
  console.log(i);
  indicators += '<li data-target="#theCarousel" data-slide-to="'+i+'" '+((i==0)?'class="active"':'')+'></li>';
  middle += '<div class="item"><img src="../img/cam001.jpg" alt="'+imgString[i].head+'"><div class="carousel-caption"><h3>Фото '+i+'</h3><p>'+imgString[i].head+'</p></div></div>' + "\n\n";
  if(!imgString[i]) {
    console.log('item '+i+' is undefined');
  }
  if(!imgString[i].src) {
    console.log('src '+i+' is undefined');
  }
  if(!imgString[i].head) {
    console.log('head '+i+' is undefined');
  }
}
  if (e) {
    $('.carousel-inner').html(middle);
    $('.carousel-indicators').html(indicators);
  }
})(false);

var loader = function () {
  $.getJSON('images.json', function (json, status, xhr) {
    console.log('JSON loaded. Status is ' + status);
    console.log(json.images.length);
    var imgs = json.images;
    for(i in imgs) {

    }
  });
}

//loader();
console.log("images.length ", images.length);

function appendImage(num, callback) {
  var middle = $('.carousel-inner').html();
  // $('.carousel-indicators').html(indicators);
  // indicators += '<li data-target="#theCarousel" data-slide-to="'+i+'" '+((i==0)?'class="active"':'')+'></li>';
  middle += '<div class="item"><img src="'+images[num].src+'" alt="'+images[num].head+'">\n<div class="carousel-caption"><h3>Фото '+(num+1)+'</h3>\n<p>'+images[num].head+'</p>\n</div>\n</div>' + "\n\n";
  $('.carousel-inner').html(middle);

  if (callback && typeof callback == "function") {
    return callback();
  }
}

function imageIterator (num) {
  if (num < images.length-1) {
    appendImage(num, function () {
      imageIterator (num + 1);
    });
  }
}

imageIterator(1);

  </script>
</html>
